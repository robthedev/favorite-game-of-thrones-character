<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="NoSql Database, MongoDB, Javascript, Express, Node.js, CSS, bootstrap, Fetch Api, HTML Templating">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap.min.css">
  <link href="https://fonts.googleapis.com/css?family=Uncial+Antiqua" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="index.css">
  <title>Most Popular Game Of Thrones Character Ever?</title>
</head>
<body>

  <div class="main-content container">
  <h1 class="top-header">Vote For Your Favorite Game Of Thrones Character</h1>
   <form id="main-form" class="form-inline" action="/gotchar" method="POST">
   <select id="char_name" class="form-control" data-style="btn-info" name="name">
    <option value=""selected disabled>Select Favorite Character</option>
   <option value"Ned Stark">Ned Stark</option>
   <option value"Benjen Stark">Benjen Stark</option>
   <option value"Robb Stark">Robb Stark</option>
   <option value"Sansa Stark">Sansa Stark</option>
   <option value"Arya Stark">Arya Stark</option>
   <option value"Brandon Stark">Brandon Stark</option>
   <option value"Rickon Stark">Rickon Stark</option>
   <option value"Jon Snow">Jon Snow</option>
   <option value"Tywin Lannister">Tywin Lannister</option>
   <option value"Tyrion Lannister">Tyrion Lannister</option>
   <option value"Jaime Lannister">Jaime Lannister</option>
   <option value"Cersei Lannister">Cersei Lannister</option>
   <option value"Robert Baratheon">Robert Baratheon</option>
   <option value"Stannis Baratheon">Stannis Baratheon</option>
   <option value"Renly Baratheon">Renly Baratheon</option>
   <option value"Joffrey Baratheon">Joffrey Baratheon</option>
   <option value"Tommen Baratheon">Tommen Baratheon</option>
   <option value"Myrcella Baratheon">Myrcella Baratheon</option>
   <option value"Daenerys Targaryen">Daenerys Targaryen</option>
   <option value"Viserys Targaryen">Viserys Targaryen</option>
   <option value"Balon Greyjoy">Balon Greyjoy</option>
   <option value"Theon Greyjoy">Theon Greyjoy</option>
   <option value"Yara Greyjoy">Yara Greyjoy</option>
   <option value"Margaery Baratheon">Margaery Baratheon</option>
   <option value"Loras Tyrell">Loras Tyrell</option>
   <option value"Catelyn Stark">Catelyn Stark</option>
   <option value"Lysa Arryn">Lysa Arryn</option>
   <option value"Edmure Tully">Edmure Tully</option>
   <option value"Brynden Tully">Brynden Tully</option>
   <option value"Olenna Tyrell">Olenna Tyrell</option>
   <option value"Walder Frey">Walder Frey</option>
   <option value"Jon Arryn">Jon Arryn</option>
   <option value"Khal Drogo">Khal Drogo</option>
   <option value"Theon Greyjoy">Theon Greyjoy</option>
   <option value"Samwell Tarly">Samwell Tarly</option>
   <option value"Petyr Baelish">Petyr Baelish</option>
   <option value"Davos Seaworth">Davos Seaworth</option>
   <option value"Brienne of Tarth">Brienne of Tarth</option>
   <option value"Sandor Clegane">Sandor Clegane</option>
   <option value"Bronn">Bronn</option>
   <option value"Melisandre">Melisandre</option>
   <option value"Maester Pycelle">Maester Pycelle</option>
   <option value"Barristan Selmy">Barristan Selmy</option>
   <option value"Jeor Mormont">Jeor Mormont</option>
   <option value"Ramsay Bolton">Ramsay Bolton</option>
   <option value"Missandei">Missandei</option>
   <option value"Jaqen H'qhar">Jaqen H'qhar</option>
   <option value"Mance Rayder">Mance Rayder</option>
   <option value"The High Sparrow">The High Sparrow</option>
   <option value"Hodor">Hodor</option>
   <option value"Gregor Clegane">Gregor Clegane</option>
   <option value"Varys">Varys</option>
</select>

   <!-- <input class="form-control" id="char_name" type="text" placeholder="Favorite Character" name="name"> -->
    <input class="form-control" id="char_reason" type="text"  placeholder="Reason" name="reason">
    <button id="submit_btn" class="btn btn-danger" type="submit">Submit</button>
  </form>
   <div>
   	<%  var names_array = [];
gotchar.forEach( function (obj){
    var character_name = obj.name;
    names_array.push(character_name); 
}); %>

	<% 	

	function mostFrequent(array) {
	var mf = 1;  
	var m = 0;  
	var item;  
	for (var i=0; i<array.length; i++)  {  
        for (var j=i; j<array.length; j++)  {  
                if (array[i] == array[j])  
                 m++;  
                if (mf<m) {  
                  mf=m;   
                  item = array[i];  
                }  
        	}  
        m=0;  
	}
	if (item === undefined || mf === 1) {
		return "No Leader Yet... ";
	}
	return item;
} %>
<div class="floating-score-block">
     <h3 class="floating-score"><%=  mostFrequent(names_array); %> Is Winning!!!</h3>
</div>

<div class="score-block">
  <h3 class="score-board"><%=  mostFrequent(names_array); %> Is Winning!!!</h3>
</div>
<div class="quotes">
  <% for(var i=0; i <gotchar.length; i++) {%>
      <div class="entry-block">
      <hr>
      <div class="char-entry">Entry: <span class="_entry"><%= i + 1 %></span></div>
      <div class="char-name">Name: <span class="_name"><%= gotchar[i].name %></span></div>
      <div class="char-reason">Reason: <span class="_reason"><%= gotchar[i].reason %></span></div>
      <input type="hidden" value="<%= gotchar[i]._id %>" placeholder="">
      <button id="delete" class="delete btn"> Delete </button>
    </div>
  <% } %>
  </div>

  
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script src="characters.js"></script>
 	<script src="main.js"></script>

</body>
</html>